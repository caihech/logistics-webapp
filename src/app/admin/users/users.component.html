<div class="users">

    <mat-card>

        <mat-card-title>
            用户列表
            <button mat-raised-button color="primary" style="float: right;" routerLink="/admin/user/add">
                添加用户
            </button>
        </mat-card-title>

        <mat-divider></mat-divider>

        <table mat-table [dataSource]="usersTableDataSource" matSort class="usersTable">

            <!-- Name id -->
            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 5%"> ID</th>
                <td mat-cell *matCellDef="let element"> {{element.id}}</td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="username">
                <th mat-header-cell *matHeaderCellDef style="width: 10%"> 账号</th>
                <td mat-cell *matCellDef=" let element"> {{element.username}}
                </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="companyName">
                <th mat-header-cell *matHeaderCellDef style="width: 15%"> 公司名称</th>
                <td mat-cell *matCellDef=" let element"> {{element.companyName}}
                </td>
            </ng-container>


            <!-- Name mobilephone -->
            <ng-container matColumnDef="mobilephone">
                <th mat-header-cell *matHeaderCellDef style="width: 10%"> 移动电话</th>
                <td mat-cell *matCellDef="let element"> {{element.mobilephone}}</td>
            </ng-container>


            <!-- Name fullname -->
            <ng-container matColumnDef="fullname">
                <th mat-header-cell *matHeaderCellDef style="width: 10%"> 真实姓名</th>
                <td mat-cell *matCellDef="let element"> {{element.fullname}}</td>
            </ng-container>

            <!-- Name roleName -->
            <ng-container matColumnDef="roleName">
                <th mat-header-cell *matHeaderCellDef style="width: 10%"> 角色</th>
                <td mat-cell *matCellDef="let element"> {{element.role.name}}</td>
            </ng-container>

            <!-- Name state -->
            <ng-container matColumnDef="stateName">
                <th mat-header-cell *matHeaderCellDef style="width: 10%"> 状态</th>
                <td mat-cell *matCellDef="let element">
                    <span *ngIf="element.valid==true">有效</span>
                    <span *ngIf="element.valid==false">无效</span>
            </ng-container>

            <!-- Name updateTime -->
            <ng-container matColumnDef="updateTime">
                <th mat-header-cell *matHeaderCellDef style="width: 10%"> 最后改动时间</th>
                <td mat-cell *matCellDef="let element">
                    {{element.updateTime |date:'yyyy-MM-dd HH:mm:ss'}}
                </td>
            </ng-container>


            <!-- Name delete -->
            <ng-container matColumnDef="delete">
                <th mat-header-cell *matHeaderCellDef style="width: 10%"> 删除</th>
                <td mat-cell *matCellDef="let element">
                    <button mat-stroked-button color="warn" (click)="onDelete(element.id)">删除</button>
                </td>
            </ng-container>

            <!-- Name edit -->
            <ng-container matColumnDef="edit">
                <th mat-header-cell *matHeaderCellDef style="width: 10%"> 编辑</th>
                <td mat-cell *matCellDef="let element">
                    <button mat-stroked-button color="primary"
                        routerLink="/admin/user/detail/{{element.id}}">编辑</button>
                </td>
            </ng-container>



            <tr mat-header-row *matHeaderRowDef="usersTableDisplayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: usersTableDisplayedColumns;"></tr>

        </table>


        <mat-paginator pageSize="20" [pageSizeOptions]="[5, 10, 20,50,100]" showFirstLastButtons></mat-paginator>

    </mat-card>


</div>